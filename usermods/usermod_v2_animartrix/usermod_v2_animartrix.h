#pragma once

#include "wled.h"
#include <ANIMartRIX.h>

#warning WLEDMM usermod: CC BY-NC 3.0 licensed effects by Stefan Petrick, include this usermod only if you accept the terms!
//========================================================================================================================


static const char _data_FX_mode_Module_Experiment10[] PROGMEM = "ðŸ’¡Module_Experiment10 â˜¾@;;1";
static const char _data_FX_mode_Module_Experiment9[] PROGMEM = "ðŸ’¡Module_Experiment9 â˜¾@;;1";
static const char _data_FX_mode_Module_Experiment8[] PROGMEM = "ðŸ’¡Module_Experiment8 â˜¾@;;1";
static const char _data_FX_mode_Module_Experiment7[] PROGMEM = "ðŸ’¡Module_Experiment7 â˜¾@;;1";
static const char _data_FX_mode_Module_Experiment6[] PROGMEM = "ðŸ’¡Module_Experiment6 â˜¾@;;1";
static const char _data_FX_mode_Module_Experiment5[] PROGMEM = "ðŸ’¡Module_Experiment5 â˜¾@;;1";
static const char _data_FX_mode_Module_Experiment4[] PROGMEM = "ðŸ’¡Module_Experiment4 â˜¾@;;1";
static const char _data_FX_mode_Zoom2[] PROGMEM = "ðŸ’¡Zoom2 â˜¾@;;1";
static const char _data_FX_mode_Module_Experiment3[] PROGMEM = "ðŸ’¡Module_Experiment3 â˜¾@;;1";
static const char _data_FX_mode_Module_Experiment2[] PROGMEM = "ðŸ’¡Module_Experiment2 â˜¾@;;1";
static const char _data_FX_mode_Module_Experiment1[] PROGMEM = "ðŸ’¡Module_Experiment1 â˜¾@;;1";
static const char _data_FX_mode_Parametric_Water[] PROGMEM = "ðŸ’¡Parametric_Water â˜¾@;;1";
static const char _data_FX_mode_Water[] PROGMEM = "ðŸ’¡Water â˜¾@;;1";
static const char _data_FX_mode_Complex_Kaleido_6[] PROGMEM = "ðŸ’¡Complex_Kaleido_6 â˜¾@;;1";
static const char _data_FX_mode_Complex_Kaleido_5[] PROGMEM = "ðŸ’¡Complex_Kaleido_5 â˜¾@;;1";
static const char _data_FX_mode_Complex_Kaleido_4[] PROGMEM = "ðŸ’¡Complex_Kaleido_4 â˜¾@;;1";
static const char _data_FX_mode_Complex_Kaleido_3[] PROGMEM = "ðŸ’¡Complex_Kaleido_3 â˜¾@;;1";
static const char _data_FX_mode_Complex_Kaleido_2[] PROGMEM = "ðŸ’¡Complex_Kaleido_2 â˜¾@;;1";
static const char _data_FX_mode_Complex_Kaleido[] PROGMEM = "ðŸ’¡Complex_Kaleido â˜¾@;;1";
static const char _data_FX_mode_SM10[] PROGMEM = "ðŸ’¡SM10 â˜¾@;;1";
static const char _data_FX_mode_SM9[] PROGMEM = "ðŸ’¡SM9 â˜¾@;;1";
static const char _data_FX_mode_SM8[] PROGMEM = "ðŸ’¡SM8 â˜¾@;;1";
static const char _data_FX_mode_SM7[] PROGMEM = "ðŸ’¡SM7 â˜¾@;;1";
static const char _data_FX_mode_SM6[] PROGMEM = "ðŸ’¡SM6 â˜¾@;;1";
static const char _data_FX_mode_SM5[] PROGMEM = "ðŸ’¡SM5 â˜¾@;;1";
static const char _data_FX_mode_SM4[] PROGMEM = "ðŸ’¡SM4 â˜¾@;;1";
static const char _data_FX_mode_SM3[] PROGMEM = "ðŸ’¡SM3 â˜¾@;;1";
static const char _data_FX_mode_SM2[] PROGMEM = "ðŸ’¡SM2 â˜¾@;;1";
static const char _data_FX_mode_SM1[] PROGMEM = "ðŸ’¡SM1 â˜¾@;;1";
static const char _data_FX_mode_Big_Caleido[] PROGMEM = "ðŸ’¡Big_Caleido (Direct leds) â˜¾@;;1";
static const char _data_FX_mode_RGB_Blobs5[] PROGMEM = "ðŸ’¡RGB_Blobs5 â˜¾@;;1";
static const char _data_FX_mode_RGB_Blobs4[] PROGMEM = "ðŸ’¡RGB_Blobs4 â˜¾@;;1";
static const char _data_FX_mode_RGB_Blobs3[] PROGMEM = "ðŸ’¡RGB_Blobs3 â˜¾@;;1";
static const char _data_FX_mode_RGB_Blobs2[] PROGMEM = "ðŸ’¡RGB_Blobs2 â˜¾@;;1";
static const char _data_FX_mode_RGB_Blobs[] PROGMEM = "ðŸ’¡RGB_Blobs â˜¾@;;1";
static const char _data_FX_mode_Polar_Waves[] PROGMEM = "ðŸ’¡Polar_Waves â˜¾@;;1";
static const char _data_FX_mode_Slow_Fade[] PROGMEM = "ðŸ’¡Slow_Fade â˜¾@;;1";
static const char _data_FX_mode_Zoom[] PROGMEM = "ðŸ’¡Zoom â˜¾@;;1";
static const char _data_FX_mode_Hot_Blob[] PROGMEM = "ðŸ’¡Hot_Blob â˜¾@;;1";
static const char _data_FX_mode_Spiralus2[] PROGMEM = "ðŸ’¡Spiralus2 â˜¾@;;1";
static const char _data_FX_mode_Spiralus[] PROGMEM = "ðŸ’¡Spiralus â˜¾@;;1";
static const char _data_FX_mode_Yves[] PROGMEM = "ðŸ’¡Yves â˜¾@;;1";
static const char _data_FX_mode_Scaledemo1[] PROGMEM = "ðŸ’¡Scaledemo1 â˜¾@;;1";
static const char _data_FX_mode_Lava1[] PROGMEM = "ðŸ’¡Lava1 â˜¾@;;1";
static const char _data_FX_mode_Caleido3[] PROGMEM = "ðŸ’¡Caleido3 â˜¾@;;1";
static const char _data_FX_mode_Caleido2[] PROGMEM = "ðŸ’¡Caleido2 â˜¾@;;1";
static const char _data_FX_mode_Caleido1[] PROGMEM = "ðŸ’¡Caleido1 â˜¾@;;1";
static const char _data_FX_mode_Distance_Experiment[] PROGMEM = "ðŸ’¡Distance_Experiment â˜¾@;;1";
static const char _data_FX_mode_Center_Field[] PROGMEM = "ðŸ’¡Center_Field â˜¾@;;1";
static const char _data_FX_mode_Waves[] PROGMEM = "ðŸ’¡Waves â˜¾@;;1";
static const char _data_FX_mode_Chasing_Spirals[] PROGMEM = "ðŸ’¡Chasing_Spirals â˜¾@;;1";
static const char _data_FX_mode_Rotating_Blob[] PROGMEM = "ðŸ’¡Rotating_Blob â˜¾@;;1";


class ANIMartRIXMod:public ANIMartRIX {
	public:
	void output() {
		for(int x = 0; x < num_x; x++) {
			for(int y = 0; y < num_y; y++) {
				SEGMENT.setPixelColorXY(x,y, buffer[xy(x,y)]);
			}
		}
	}

	// Add any extra custom effects not part of the ANIMartRIX libary here
};
ANIMartRIXMod anim;

uint16_t mode_Module_Experiment10() { 
	anim.Module_Experiment10();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Module_Experiment9() { 
	anim.Module_Experiment9();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Module_Experiment8() { 
	anim.Module_Experiment8();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Module_Experiment7() { 
	anim.Module_Experiment7();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Module_Experiment6() { 
	anim.Module_Experiment6();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Module_Experiment5() { 
	anim.Module_Experiment5();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Module_Experiment4() { 
	anim.Module_Experiment4();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Zoom2() { 
	anim.Zoom2();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Module_Experiment3() { 
	anim.Module_Experiment3();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Module_Experiment2() { 
	anim.Module_Experiment2();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Module_Experiment1() { 
	anim.Module_Experiment1();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Parametric_Water() { 
	anim.Parametric_Water();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Water() { 
	anim.Water();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Complex_Kaleido_6() { 
	anim.Complex_Kaleido_6();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Complex_Kaleido_5() { 
	anim.Complex_Kaleido_5();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Complex_Kaleido_4() { 
	anim.Complex_Kaleido_4();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Complex_Kaleido_3() { 
	anim.Complex_Kaleido_3();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Complex_Kaleido_2() { 
	anim.Complex_Kaleido_2();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Complex_Kaleido() { 
	anim.Complex_Kaleido();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_SM10() { 
	anim.SM10();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_SM9() { 
	anim.SM9();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_SM8() { 
	anim.SM8();
	anim.output();
	return FRAMETIME;
}
// uint16_t mode_SM7() { 
// 	art.SM7();
//	art.output();
//	return FRAMETIME;
// }
uint16_t mode_SM6() { 
	anim.SM6();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_SM5() { 
	anim.SM5();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_SM4() { 
	anim.SM4();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_SM3() { 
	anim.SM3();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_SM2() { 
	anim.SM2();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_SM1() { 
	anim.SM1();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Big_Caleido() { 
	if (SEGENV.call == 0) {
		SEGMENT.setUpLeds();  //lossless getPixelColor()
    	SEGMENT.fill(BLACK);
		anim.setBuffer(SEGMENT.leds);
	}
	anim.Big_Caleido();
	SEGMENT.fadeToBlackBy(0);
//	anim.output();
	return FRAMETIME;
}
uint16_t mode_RGB_Blobs5() { 
	anim.RGB_Blobs5();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_RGB_Blobs4() { 
	anim.RGB_Blobs4();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_RGB_Blobs3() { 
	anim.RGB_Blobs3();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_RGB_Blobs2() { 
	anim.RGB_Blobs2();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_RGB_Blobs() { 
	anim.RGB_Blobs();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Polar_Waves() { 
	anim.Polar_Waves();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Slow_Fade() { 
	anim.Slow_Fade();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Zoom() { 
	anim.Zoom();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Hot_Blob() { 
	anim.Hot_Blob();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Spiralus2() { 
	anim.Spiralus2();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Spiralus() { 
	anim.Spiralus();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Yves() { 
	anim.Yves();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Scaledemo1() { 
	anim.Scaledemo1();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Lava1() { 
	anim.Lava1();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Caleido3() { 
	anim.Caleido3();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Caleido2() { 
	anim.Caleido2();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Caleido1() { 
	anim.Caleido1();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Distance_Experiment() { 
	anim.Distance_Experiment();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Center_Field() { 
	anim.Center_Field();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Waves() { 
	anim.Waves();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Chasing_Spirals() { 
	anim.Chasing_Spirals();
	anim.output();
	return FRAMETIME;
}
uint16_t mode_Rotating_Blob() { 
	anim.Rotating_Blob();
	anim.output();
	return FRAMETIME;
}


class AnimartrixUsermod : public Usermod {

  public:

    AnimartrixUsermod(const char *name, bool enabled):Usermod(name, enabled) {} //WLEDMM
	CRGB buffer[256];

    void setup() {

      bool serpentine = false;
      anim.init(SEGMENT.virtualWidth(), SEGMENT.virtualHeight(), buffer, serpentine);

      strip.addEffect(255, &mode_Module_Experiment10, _data_FX_mode_Module_Experiment10);
      strip.addEffect(255, &mode_Module_Experiment9, _data_FX_mode_Module_Experiment9);
      strip.addEffect(255, &mode_Module_Experiment8, _data_FX_mode_Module_Experiment8);
      strip.addEffect(255, &mode_Module_Experiment7, _data_FX_mode_Module_Experiment7);
      strip.addEffect(255, &mode_Module_Experiment6, _data_FX_mode_Module_Experiment6);
      strip.addEffect(255, &mode_Module_Experiment5, _data_FX_mode_Module_Experiment5);
      strip.addEffect(255, &mode_Module_Experiment4, _data_FX_mode_Module_Experiment4);
      strip.addEffect(255, &mode_Zoom2, _data_FX_mode_Zoom2);
      strip.addEffect(255, &mode_Module_Experiment3, _data_FX_mode_Module_Experiment3);
      strip.addEffect(255, &mode_Module_Experiment2, _data_FX_mode_Module_Experiment2);
      strip.addEffect(255, &mode_Module_Experiment1, _data_FX_mode_Module_Experiment1);
      strip.addEffect(255, &mode_Parametric_Water, _data_FX_mode_Parametric_Water);
      strip.addEffect(255, &mode_Water, _data_FX_mode_Water);
      strip.addEffect(255, &mode_Complex_Kaleido_6, _data_FX_mode_Complex_Kaleido_6);
      strip.addEffect(255, &mode_Complex_Kaleido_5, _data_FX_mode_Complex_Kaleido_5);
      strip.addEffect(255, &mode_Complex_Kaleido_4, _data_FX_mode_Complex_Kaleido_4);
      strip.addEffect(255, &mode_Complex_Kaleido_3, _data_FX_mode_Complex_Kaleido_3);
      strip.addEffect(255, &mode_Complex_Kaleido_2, _data_FX_mode_Complex_Kaleido_2);
      strip.addEffect(255, &mode_Complex_Kaleido, _data_FX_mode_Complex_Kaleido);
      strip.addEffect(255, &mode_SM10, _data_FX_mode_SM10);
      strip.addEffect(255, &mode_SM9, _data_FX_mode_SM9);
      strip.addEffect(255, &mode_SM8, _data_FX_mode_SM8);
      // strip.addEffect(255, &mode_SM7, _data_FX_mode_SM7);
      strip.addEffect(255, &mode_SM6, _data_FX_mode_SM6);
      strip.addEffect(255, &mode_SM5, _data_FX_mode_SM5);
      strip.addEffect(255, &mode_SM4, _data_FX_mode_SM4);
      strip.addEffect(255, &mode_SM3, _data_FX_mode_SM3);
      strip.addEffect(255, &mode_SM2, _data_FX_mode_SM2);
      strip.addEffect(255, &mode_SM1, _data_FX_mode_SM1);
      strip.addEffect(255, &mode_Big_Caleido, _data_FX_mode_Big_Caleido);
      strip.addEffect(255, &mode_RGB_Blobs5, _data_FX_mode_RGB_Blobs5);
      strip.addEffect(255, &mode_RGB_Blobs4, _data_FX_mode_RGB_Blobs4);
      strip.addEffect(255, &mode_RGB_Blobs3, _data_FX_mode_RGB_Blobs3);
      strip.addEffect(255, &mode_RGB_Blobs2, _data_FX_mode_RGB_Blobs2);
      strip.addEffect(255, &mode_RGB_Blobs, _data_FX_mode_RGB_Blobs);
      strip.addEffect(255, &mode_Polar_Waves, _data_FX_mode_Polar_Waves);
      strip.addEffect(255, &mode_Slow_Fade, _data_FX_mode_Slow_Fade);
      strip.addEffect(255, &mode_Zoom, _data_FX_mode_Zoom);
      strip.addEffect(255, &mode_Hot_Blob, _data_FX_mode_Hot_Blob);
      strip.addEffect(255, &mode_Spiralus2, _data_FX_mode_Spiralus2);
      strip.addEffect(255, &mode_Spiralus, _data_FX_mode_Spiralus);
      strip.addEffect(255, &mode_Yves, _data_FX_mode_Yves);
      strip.addEffect(255, &mode_Scaledemo1, _data_FX_mode_Scaledemo1);
      strip.addEffect(255, &mode_Lava1, _data_FX_mode_Lava1);
      strip.addEffect(255, &mode_Caleido3, _data_FX_mode_Caleido3);
      strip.addEffect(255, &mode_Caleido2, _data_FX_mode_Caleido2);
      strip.addEffect(255, &mode_Caleido1, _data_FX_mode_Caleido1);
      strip.addEffect(255, &mode_Distance_Experiment, _data_FX_mode_Distance_Experiment);
      strip.addEffect(255, &mode_Center_Field, _data_FX_mode_Center_Field);
      strip.addEffect(255, &mode_Waves, _data_FX_mode_Waves);
      strip.addEffect(255, &mode_Chasing_Spirals, _data_FX_mode_Chasing_Spirals);
      strip.addEffect(255, &mode_Rotating_Blob, _data_FX_mode_Rotating_Blob);

      initDone = true;
    }

    void loop() {
      if (!enabled || strip.isUpdating()) return;

      // do your magic here
      if (millis() - lastTime > 1000) {
        //USER_PRINTLN("I'm alive!");
        lastTime = millis();
      }
    }

    void addToJsonInfo(JsonObject& root)
    {
      char myStringBuffer[16]; // buffer for snprintf()
      JsonObject user = root["u"];
      if (user.isNull()) user = root.createNestedObject("u");

      JsonArray infoArr = user.createNestedArray(FPSTR(_name));

      String uiDomString = F("Animartrix requires the Creative Commons Attribution License CC BY-NC 3.0");
      infoArr.add(uiDomString);
	}

    uint16_t getId()
    {
      return USERMOD_ID_ANIMARTRIX;
    }

};



